{% load feincms_tags ticker weather jsonify %}
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="robots" content="NOFOLLOW, NOINDEX" />
    
    <link rel="stylesheet" href="{{ STATIC_URL }}screen/css/boilerplate.css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}screen/fonts/akkurat.css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}screen/fonts/bodoni.css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}screen/css/weather-icons.css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}screen/css/global.css" />
    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://www.youtube.com/iframe_api"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}screen/js/slideshow.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}screen/lib/coolclock/coolclock.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}screen/lib/coolclock/moreskins.js"></script>
    <!--<script type="text/javascript" src="{{ STATIC_URL }}screen/js/global.js"></script>-->

    <script>
        window.ScreenData = {
            location: "{{ feincms_page.location }}",
            main: [
                {% for content in feincms_page.content.main %}
                {
                    type: '{{ content.Meta.verbose_name|lower }}',
                    ordering: {{ content.ordering }},
                    priority: {{ content.priority }},
                    morning: {{ content.morning|lower }},
                    noon: {{ content.noon|lower }},
                    afternoon: {{ content.afternoon|lower }},
                    evening: {{ content.evening|lower }},
                    night: {{ content.night|lower }},

                    {% if content.Meta.verbose_name|lower == 'text' %}
                        text: '{{ content.text|linebreaks }}',
                        size: '{{ content.size }}',

                    {% elif content.Meta.verbose_name|lower == 'simple image gallery' %}
                        mediafiles: [
                            {% for m in content.category.mediafile_set.all %}
                            {
                                url: '{{ m.get_absolute_url }}',
                                cover: {{ m.cover|lower }},
                                caption: '{{ m.translation.caption }}',
                                description: '{{ m.translation.description }}'
                            }{% if not forloop.last %},{% endif %}
                            {% endfor %}
                        ],

                    {% elif content.Meta.verbose_name|lower == 'externer inhalt' %}
                        type: '{{ content.type }}',
                        response: {{ content.get_html_from_json }},

                    {% elif content.Meta.verbose_name|lower == 'facebook image posts' %}
                        user: '{{ content.user }}',

                    {% elif content.Meta.verbose_name|lower == 'news panel' %}
                        ticker: {% ticker_combined request "main" feincms_page 1 %},
                    {% endif %}

                    duration: {{ content.duration }}
                }{% if not forloop.last %},{% endif %}
                {% endfor %}
            ]
        }
    </script>
    
    <title>YouthHostel.ch Info Screen</title>
</head>
<body>
    <div id="container" data-path={{ feincms_page.get_absolute_url }}>
        <div id="weather">
            {% block weather %}
                {% weather_widget '47.554189' '7.601553' 'ca' 'de' 'hourly' %}
            {% endblock weather %}
        </div>
        <div id="announcements">
            {% block announcements %}
                <div class="dummy"></div>
            {% endblock %}
        </div>
        <div id="content" data-currentcontent="-1">
            {% block content %}
                {# feincms_render_region feincms_page "main" request #}
                <div class="dummy"></div>
            {% endblock content %}
        </div>
        <div id="ticker">
            {% block ticker %}
                {% ticker_combined request "ticker" feincms_page 1 %}
            {% endblock ticker %}
        </div>
				<canvas id="clock" class="CoolClock:chunkySwissOnBlack:50"></canvas>
    </div>
    
</body>
</html>